{% extends "network/layout.html" %}

{% block body %}

<h4>{{ user_profile.username }}</h4>
<div>Followers: {{followers}} &nbsp; Following: {{following}}</div>
{% if user.is_authenticated and not self_login %}
<form method="post" action="{% url 'follow' user_profile.id %}">
    {% csrf_token %}
    {% if user_follow %}
    <input type="submit" value="Unfollow">
    {% else %}
    <input type="submit" value="Follow">
    {% endif %}

</form>
{% endif %}
<hr>

{% if self_login %}
<div id="new-post">
    <form method="POST" action="{% url 'new_post' %}" enctype="multipart/form-data">
        {% csrf_token %}
        <h5>NewPost</h5>
        <textarea id="story" name="entry" rows="5" cols="100"></textarea>
        <br>
        Image: <input type="file" accept="image/*" class="image" name="image">
        <br>
        <input type="submit" value="Post">
    </form>
</div>
<hr>
{% endif %}


<ul>
{% for p in posts %}
<li>
    {% if p.image %}
    <img src="{{ p.image.url }}" width="500">
    {% endif %}
    <P>{{p.entry}} <br> by <a href="{% url 'profile' p.creator.id %}">{{p.creator}}</a> @ {{p.created_date}}</P>
    </li>
{% endfor %}
</ul>

{% endblock %}